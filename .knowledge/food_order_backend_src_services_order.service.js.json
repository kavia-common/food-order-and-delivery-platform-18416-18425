{"is_source_file": true, "format": "JavaScript", "description": "This file defines the OrderService class, which provides methods to create, retrieve, list, and update orders in a food ordering platform. It interacts with an external datastore module and enforces access control based on user roles.", "external_files": ["../models/datastore"], "external_methods": ["store.computeOrderTotal", "store.createOrder", "store.getOrder", "store.listOrders", "store.updateOrderStatus"], "published": ["OrderService"], "classes": [{"name": "OrderService", "description": "A service class providing order-related operations such as creation, retrieval, listing, and status updates within the food delivery platform."}], "methods": [{"name": "createOrder(userId, { items })", "description": "Creates a new order for a user with specified items, validating input and calculating total.", "scope": "OrderService", "scopeKind": "class"}, {"name": "getOrder(user, id)", "description": "Retrieves an order by ID, ensuring access is authorized for the requesting user.", "scope": "OrderService", "scopeKind": "class"}, {"name": "listOrders(user, { status } = {})", "description": "Lists orders, filtered by status and user role; non-admins see only their own orders.", "scope": "OrderService", "scopeKind": "class"}, {"name": "updateStatus(user, id, nextStatus)", "description": "Updates the status of an order, allowing only admins or the order owner to cancel a pending order.", "scope": "OrderService", "scopeKind": "class"}], "calls": ["store.computeOrderTotal", "store.createOrder", "store.getOrder", "store.listOrders", "store.updateOrderStatus"], "search-terms": ["OrderService", "createOrder", "getOrder", "listOrders", "updateStatus", "food_order_backend", "order management", "order status", "datastore"], "state": 2, "file_id": 18, "knowledge_revision": 39, "git_revision": "", "ctags": [{"_type": "tag", "name": "OrderService", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^class OrderService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "VALID_STATUSES", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^const VALID_STATUSES = ['pending', 'confirmed', 'preparing', 'out_for_delivery', 'completed', 'c/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^  createOrder(userId, { items }) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, { items })", "scope": "OrderService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^module.exports = new OrderService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getOrder", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^  getOrder(user, id) {$/", "language": "JavaScript", "kind": "method", "signature": "(user, id)", "scope": "OrderService", "scopeKind": "class"}, {"_type": "tag", "name": "listOrders", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^  listOrders(user, { status } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(user, { status } = {})", "scope": "OrderService", "scopeKind": "class"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^const store = require('..\\/models\\/datastore');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateStatus", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/order.service.js", "pattern": "/^  updateStatus(user, id, nextStatus) {$/", "language": "JavaScript", "kind": "method", "signature": "(user, id, nextStatus)", "scope": "OrderService", "scopeKind": "class"}], "hash": "96371d0a97b328250dd076ff1a62ff97", "format-version": 4, "code-base-name": "food_order_backend", "filename": "food_order_backend/src/services/order.service.js", "fields": [{"name": "module.exports = new OrderService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"39": ""}]}