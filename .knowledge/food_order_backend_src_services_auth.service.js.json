{"is_source_file": true, "format": "JavaScript", "description": "This file implements an authentication service for a food order and delivery platform. It provides methods for user registration and login, managing JWT token signing, password hashing, and user data retrieval through a datastore.", "external_files": ["../models/datastore"], "external_methods": ["store.findUserByEmail", "store.createUser"], "published": ["new AuthService()"], "classes": [{"name": "AuthService", "description": "Service class providing user registration and login functionalities, including JWT token management."}], "methods": [{"name": "signToken(user)", "description": "Generates a JWT token for a given user, using a secret and expiration time from environment variables.", "scope": "", "scopeKind": ""}, {"name": "register({ name, email, password, role = 'user' })", "description": "Creates a new user in the datastore, after validating input, hashing password, and ensuring email uniqueness; returns JWT and user info.", "scope": "AuthService", "scopeKind": "class"}, {"name": "login({ email, password })", "description": "Authenticates user credentials, and if valid, returns a JWT and user info.", "scope": "AuthService", "scopeKind": "class"}], "calls": ["store.findUserByEmail", "store.createUser", "bcrypt.hash", "bcrypt.compare", "jwt.sign"], "search-terms": ["auth.service.js", "JWT_SECRET", "signToken", "register", "login", "AuthService", "datastore"], "state": 2, "file_id": 15, "knowledge_revision": 33, "git_revision": "", "ctags": [{"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^class AuthService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "bcrypt", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^const bcrypt = require('bcryptjs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^module.exports = new AuthService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "jwt", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^const jwt = require('jsonwebtoken');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^  async login({ email, password }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ email, password })", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^  const payload = { sub: user.id, role: user.role || 'user' };$/", "language": "JavaScript", "kind": "class", "scope": "signToken", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^  async register({ name, email, password, role = 'user' }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ name, email, password, role = 'user' })", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^  const payload = { sub: user.id, role: user.role || 'user' };$/", "language": "JavaScript", "kind": "property", "scope": "signToken.payload", "scopeKind": "class"}, {"_type": "tag", "name": "signToken", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^function signToken(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^const store = require('..\\/models\\/datastore');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "sub", "path": "/home/kavia/workspace/code-generation/food-order-and-delivery-platform-18416-18425/food_order_backend/src/services/auth.service.js", "pattern": "/^  const payload = { sub: user.id, role: user.role || 'user' };$/", "language": "JavaScript", "kind": "property", "scope": "signToken.payload", "scopeKind": "class"}], "hash": "fb92a5ba1e66d871300153247cf08602", "format-version": 4, "code-base-name": "food_order_backend", "filename": "food_order_backend/src/services/auth.service.js", "fields": [{"name": "module.exports = new AuthService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "const payload = { sub: user.id, role: user.role || 'user' };", "scope": "signToken.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"33": ""}]}